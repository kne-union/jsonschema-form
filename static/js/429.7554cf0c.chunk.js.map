{"version":3,"file":"static/js/429.7554cf0c.chunk.js","mappings":"qlBAEO,MAAMA,EAAS,CACpBC,aAAc,KACdC,YAAcC,GAAsBC,GAAUC,IAAAA,cAACF,EAAqBC,IAGzDE,EAAUC,GACdC,OAAOC,OAAOT,EAAQO,G,sFCFzBG,EAAYP,GACTQ,IAA8D,IAA7D,SAAEC,EAAQ,UAAEC,EAAS,OAAEC,EAAM,QAAEC,EAAO,KAAEC,GAAgBL,EAAPP,EAAKa,EAAAN,EAAAO,GAC5D,MAAOC,EAASC,IAAcC,EAAAA,EAAAA,WAAS,IACvCC,EAAAA,EAAAA,qBAAoBR,GAAQ,KACnB,CACLS,MAAOA,IAAMH,GAAW,GAAQA,aAAYD,aAE7C,CAACA,EAASC,IAEb,MAAMI,ECba,SAACC,GAA+B,IAArBC,EAAQC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GACxC,MAAMG,GAAcC,EAAAA,EAAAA,QAAON,GAI3B,OAHKC,IACHI,EAAYE,QAAUP,IAEjBQ,EAAAA,EAAAA,cAAY,WACjB,OAAOH,EAAYE,SAAWF,EAAYE,WAAQL,U,GACjD,GACJ,CDKiBO,CAAenB,GAO7B,OALAoB,EAAAA,EAAAA,YAAU,KACRX,IACAJ,GAAW,EAAK,GACf,CAACI,IAEInB,IAAAA,cAACF,EAAgBiC,EAAA,GACnBhC,EAAK,CACTiC,KAAMlB,EACNI,MAAOA,IAAMH,GAAW,GACxBJ,KAAMsB,UACJ,IAAKtB,EAEH,YADAI,GAAW,IAID,UADMJ,KAEhBI,GAAW,EACb,EAEFR,SAAU,WACRQ,GAAW,GACXR,GAAYA,KAASe,U,EAEvBY,WAAY1B,IACZ,EAIA2B,EAAkBrC,IACtB,MAAMsC,GAAMC,EAAAA,EAAAA,WAAU,MACtB,OAAQC,IACN,MAAMC,EAAO5C,EAAOC,cAAgBD,EAAOC,gBAAkB4C,SAASD,KAChEE,EAAOD,SAASE,cAAc,OACYC,EAAAxC,OAAOC,OAAO,CAAC,EAAGkC,IAA5D,YAAEzC,EAAW,aAAED,GAAwB+C,EAAP5C,EAAKa,EAAA+B,EAAAC,GAC3CL,EAAKM,YAAYJ,GACjB,MAAMK,EAAUC,EAAAA,WAAoBN,GAC9BO,EAAU,IAAIC,SAASC,IAC3B,MAAMC,GAAgBC,EAAAA,EAAAA,GAAQ/C,EAAWV,EAAOE,YAA1BuD,CAA8D,oBAAhBvD,EAA6BA,EAAYC,GAAoBA,GACjIgD,EAAQO,OAAOrD,IAAAA,cAACmD,EAAapB,EAAA,CAC3BtB,OAAQ2B,GACJrC,EAAK,CACTH,aAAcA,GAAgB,KAAO6C,GACrCjC,UAAWA,KACTiC,EAAKa,MAAMC,QAAU,IACrBhB,EAAKiB,YAAYf,GACjBgB,YAAW,KACTX,EAAQY,SAAS,GAChB,EAAE,EAEPhD,QAASA,KACPwC,EAAQ,CACNhC,MAAOkB,EAAIT,QAAQT,OACnB,KAEH,IAGCA,EAAQA,IACL8B,EAAQW,MAAKC,IAAe,IAAd,MAAE1C,GAAO0C,EAC5B1C,GAAO,IAGX,MAAO,CACLA,QAAOS,QAAS,CAAET,SACnB,CACF,C,kBEhFH,IAAI2C,EAAIC,EAAQ,OAEdC,EAAQC,WAAaH,EAAEG,WACvBD,EAAQE,YAAcJ,EAAEI,W","sources":["../../node_modules/@kne/with-layer/src/preset.js","../../node_modules/@kne/with-layer/src/index.js","../../node_modules/@kne/use-ref-callback/src/index.js","../../node_modules/react-dom/client.js"],"sourcesContent":["import React from \"react\";\r\n\r\nexport const global = {\r\n  getContainer: null,\r\n  withInstall: (WrappedComponent) => (props) => <WrappedComponent {...props} />\r\n};\r\n\r\nexport const preset = (options) => {\r\n  return Object.assign(global, options);\r\n};\r\n\r\nexport default preset;\r\n","import ReactDOM from \"react-dom/client\";\r\nimport compose from \"@kne/compose\";\r\nimport React, { createRef, useState, useImperativeHandle, useEffect } from \"react\";\r\nimport useRefCallback from \"@kne/use-ref-callback\";\r\nimport { global } from \"./preset\";\r\n\r\nconst withLayer = WrappedComponent => {\r\n  return ({ onCancel, onDestroy, outRef, onMount, onOk, ...props }) => {\r\n    const [visible, setVisible] = useState(false);\r\n    useImperativeHandle(outRef, () => {\r\n      return {\r\n        close: () => setVisible(false), setVisible, visible\r\n      };\r\n    }, [visible, setVisible]);\r\n\r\n    const mount = useRefCallback(onMount);\r\n\r\n    useEffect(() => {\r\n      mount();\r\n      setVisible(true);\r\n    }, [mount]);\r\n\r\n    return (<WrappedComponent\r\n      {...props}\r\n      open={visible}\r\n      close={() => setVisible(false)}\r\n      onOk={async () => {\r\n        if (!onOk) {\r\n          setVisible(false);\r\n          return;\r\n        }\r\n        const res = await onOk();\r\n        if (res !== false) {\r\n          setVisible(false);\r\n        }\r\n      }}\r\n      onCancel={(...args) => {\r\n        setVisible(false);\r\n        onCancel && onCancel(...args);\r\n      }}\r\n      afterClose={onDestroy}\r\n    />);\r\n  };\r\n};\r\n\r\nconst createWithLayer = WrappedComponent => {\r\n  const ref = createRef(null);\r\n  return (args) => {\r\n    const body = global.getContainer && global.getContainer() || document.body;\r\n    const root = document.createElement(\"div\");\r\n    const { withInstall, getContainer, ...props } = Object.assign({}, args);\r\n    body.appendChild(root);\r\n    const rootDom = ReactDOM.createRoot(root);\r\n    const promise = new Promise((resolve) => {\r\n      const LayerInstance = compose(withLayer, global.withInstall)(typeof withInstall === \"function\" ? withInstall(WrappedComponent) : WrappedComponent);\r\n      rootDom.render(<LayerInstance\r\n        outRef={ref}\r\n        {...props}\r\n        getContainer={getContainer || (() => root)}\r\n        onDestroy={() => {\r\n          root.style.opacity = \"0\";\r\n          body.removeChild(root);\r\n          setTimeout(() => {\r\n            rootDom.unmount();\r\n          }, 0);\r\n        }}\r\n        onMount={() => {\r\n          resolve({\r\n            close: ref.current.close\r\n          });\r\n        }}\r\n      />);\r\n    });\r\n\r\n    const close = () => {\r\n      return promise.then(({ close }) => {\r\n        close();\r\n      });\r\n    };\r\n    return {\r\n      close, current: { close }\r\n    };\r\n  };\r\n};\r\n\r\nexport default createWithLayer;\r\nexport { preset } from \"./preset\";\r\n","import { useRef, useCallback } from \"react\";\n\nconst useRefCallback = (callback, keepInit = false) => {\n  const callbackRef = useRef(callback);\n  if (!keepInit) {\n    callbackRef.current = callback;\n  }\n  return useCallback((...args) => {\n    return callbackRef.current && callbackRef.current(...args);\n  }, []);\n};\n\nexport default useRefCallback;\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n"],"names":["global","getContainer","withInstall","WrappedComponent","props","React","preset","options","Object","assign","withLayer","_ref","onCancel","onDestroy","outRef","onMount","onOk","_objectWithoutPropertiesLoose","_excluded","visible","setVisible","useState","useImperativeHandle","close","mount","callback","keepInit","arguments","length","undefined","callbackRef","useRef","current","useCallback","useRefCallback","useEffect","_extends","open","async","afterClose","createWithLayer","ref","createRef","args","body","document","root","createElement","_Object$assign","_excluded2","appendChild","rootDom","ReactDOM","promise","Promise","resolve","LayerInstance","compose","render","style","opacity","removeChild","setTimeout","unmount","then","_ref2","m","require","exports","createRoot","hydrateRoot"],"sourceRoot":""}